<div class="datasets-filters__type">
  <!-- <ui-checkbox [name]="'media'" [(model)]="checkbox.media.value">
    {{ 'datasets.filters.' + checkbox.media.key | translate }}
  </ui-checkbox> -->
  <!-- <ui-checkbox [name]="'coordinates'" [(model)]="checkbox.coordinates.value">
    {{ 'datasets.filters.' + checkbox.coordinates.key | translate }}
  </ui-checkbox> -->
</div>
<div class="datasets-filters__filters">
  <div class="datasets-filters__filters__mobile">
    <ofd-agregator-datasets-filter
      header="{{ 'datasets.filters.' + categories.key | translate }}"
      [data]="categories.data()"
      [key]="categories.key"
      [value]="selectedCategory"
      [isExpanded]="categories.isExpanded"
      [multiple]="categories.multiple"
      (valueChange)="categoryChanged($event)"
    ></ofd-agregator-datasets-filter>
  </div>
  <ng-container *ngFor="let key of getFilters()">
    <ofd-agregator-datasets-filter
      header="{{ filters[key].name }}"
      [data]="filters[key].data()"
      [key]="filters[key].key"
      [(value)]="filters[key].value"
      [isExpanded]="filters[key].isExpanded"
      [multiple]="filters[key].multiple"
      (valueChange)="filtersChanged($event)"
    ></ofd-agregator-datasets-filter>
  </ng-container>
  <ng-container *ngIf="moreFilters">
    <ng-container *ngFor="let key of getFilters(false)">
      <ofd-agregator-datasets-filter
        header="{{ filters[key].name }}"
        [data]="filters[key].data()"
        [key]="filters[key].key"
        [(value)]="filters[key].value"
        [isExpanded]="filters[key].isExpanded"
        [multiple]="filters[key].multiple"
        (valueChange)="filtersChanged($event)"
      ></ofd-agregator-datasets-filter>
    </ng-container>
  </ng-container>

  <button
    class="button datasets-filters__more-filters"
    *ngIf="keys(this.filters).length > moreCountStart"
    (click)="moreFilters = !moreFilters"
  >
    <ng-container *ngIf="!moreFilters">
      {{ 'global.more-filters' | translate }}
      <svg-icon src="assets/images/plus.svg" class="m-l-10" [applyCss]="true"></svg-icon>
    </ng-container>
    <ng-container *ngIf="moreFilters">
      {{ 'global.less-filters' | translate }}
      <svg-icon src="assets/images/minus.svg" class="m-l-10 m-t--10" [applyCss]="true"></svg-icon>
    </ng-container>
  </button>
</div>

<div class="advanced" [ngClass]="{ active: showAdvanced }">
  <div class="row">
    <div class="col-xs-12 end-xs">
      <img src="assets/modules/search/times.png" class="times" alt="Close" />
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <ofd-agregator-section-title
        [iconURL]="'assets/modules/search/search_title.png'"
        [titleText]="'search.advanced' | translate"
      ></ofd-agregator-section-title>
    </div>
  </div>

  <ng-select
    [items]="people"
    [multiple]="true"
    bindLabel="name"
    [addTag]="true"
    [selectableGroup]="true"
    [closeOnSelect]="false"
    bindValue="id"
    [(ngModel)]="selectedPeople"
  >
    <ng-template ng-optgroup-tmp let-item="item" let-item$="item$" let-index="index">
      <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.gender | uppercase }}
    </ng-template>
    <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
      <input id="item-{{ index }}" type="checkbox" [ngModel]="item$.selected" /> {{ item.name }}
    </ng-template>
  </ng-select>
</div>
